{% extends "layouts/base.html" %}

{% block content %}
<h1>Clone Project from GitHub</h1>
<form id="deployForm" action="/deploy" method="post">
    <input type="text" name="github_repo" placeholder="Enter GitHub Repository URL" required>
    <button type="submit">Deploy</button>
</form>

<div id="log"></div>
<div id="progress" style="width: 0%; height: 20px; background-color: blue;"></div>

<script>
document.getElementById('deployForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    const githubRepo = formData.get('github_repo');

    fetch(`/deploy`, {
        method: 'POST',
        body: new URLSearchParams(`github_repo=${githubRepo}`)
    }).then(response => response.text())  // Assuming response is plain text
      .then(data => {
          const logDiv = document.getElementById('log');
          logDiv.innerHTML += data + '<br>';
          // Handle completion and update UI accordingly
      }).catch(error => console.error('Error:', error));
});


</script>
{% endblock %}
